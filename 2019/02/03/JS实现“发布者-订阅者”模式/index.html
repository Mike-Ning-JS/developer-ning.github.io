<!DOCTYPE html>
<html>
  <head><meta name="generator" content="Hexo 3.8.0">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <meta name="keywords" content="hexo, autumn">
    <title>
        个人博客
    </title>
    <!-- favicon -->
    
    <link rel="icon" href="https://cdn.jsdelivr.net/gh/frontendsophie/hexo-theme-autumn@1.0.0/source/img/favicon.ico">
    
    <link rel="stylesheet" href="/css/style.css">

    <!-- highlight -->
    <link rel="stylesheet" href="https://cdn.bootcss.com/highlight.js/9.12.0/styles/github-gist.min.css">
    <script src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script>
    <script>
        hljs.initHighlightingOnLoad()
    </script>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/frontendsophie/hexo-infinite-scroll@1.0.0/dist/hexo-infinite-scroll.min.css">
    <script src="https://cdn.jsdelivr.net/gh/frontendsophie/hexo-infinite-scroll@1.0.0/dist/hexo-infinite-scroll.min.js"></script>
    <script>
        infiniteScroll()

        // for mobile menu
        $(function () {
            $('.social-button').click(function () {
                if ($('.social-links').hasClass('hide-links')) {
                    $('.social-links').removeClass('hide-links')
                } else {
                    $('.social-links').addClass('hide-links')
                }
            })
        })
    </script>
</head>

  <body style="background: url(https://cdn.jsdelivr.net/gh/frontendsophie/hexo-theme-autumn@1.0.0/source/img/button-bg.png) #f3f3f3">
    <div class="container">
      <!-- <header class="header">
    <h1 class="title">
        <a href="/" class="logo">
            个人博客
        </a>
    </h1>
    <h2 class="desc">
        
    </h2>

    <nav class="links">
        <button class="social-button">
            menu
        </button>
        <ul class="social-links hide-links">
            
                <li>
                    <a href="https://github.com/FrontendSophie">
                        Github
                    </a>
                </li>
                
                <li>
                    <a href="https://www.linkedin.com/in/frontendsophie/">
                        LinkedIn
                    </a>
                </li>
                
        </ul>
    </nav>
</header> -->

      <main class="main">
        <article class="post">
    
    
    <h4 class="post-cat">
        <a href="/categories/javaScript/">
            javaScript
        </a>
    </h4>
    
    <h4 class="post-cat">
        <a href="/categories/javaScript/设计模式/">
            设计模式
        </a>
    </h4>
    
    
    <h2 class="post-title">
        JavaScript实现“发布者-订阅者”模式
    </h2>
    <ul class="post-date">
        <li>
            2019-02-03
        </li>
        <li>
            Ning
        </li>
    </ul>
    <div class="post-content">
        <p>简单来说，发布订阅者模式就是一种一对多的依赖关系。多个订阅者（一般是注册的函数）同时监听同一个数据对象，当这个数据对象发生变化的时候会执行一个发布事件，通过这个发布事件会通知到所有的订阅者，使它们能够自己改变对数据对象依赖的部分状态。</p>
<p>下面实现一个简单的“发布者 - 订阅者”模式：</p>
<pre><code>// 实现发布者
function Publisher() {
    // 存放所有的订阅者
    this.subscribers = [];

    // 添加订阅者，且仅订阅1次
    this.addSubscriber = function(subscriber) {
        let isExist = this.subscribers.some(item =&gt; item == subscriber);
        if (!isExist) {
            this.subscribers.push(subscriber);
        }
        return this;
    };

    // 发布消息
    this.deliver = function(data) {
        this.subscribers.forEach(fn =&gt; fn(data));
        return this;
    };
}

// 构建订阅者
let subscriberA = function(data) {
    console.log(`我是订阅者A, data: ${data}`);
};
let subscriberB = function(data) {
    console.log(`我是订阅者B, data: ${data}`);
};

let publisher = new Publisher();

// 添加订阅者
publisher.addSubscriber(subscriberA).addSubscriber(subscriberB);

publisher.deliver(&quot;发布一条信息&quot;);
</code></pre>
    </div>
</article>
      </main>
      <aside class="aside">
        <section class="aside-section">
          
    <h1>Categories</h1>

    <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/jQuery/">jQuery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/javaScript/">javaScript</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/javaScript/设计模式/">设计模式</a></li></ul></li></ul>

        </section>
        <section class="aside-section">
          
    <h1>Archives</h1>

    <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019</a></li></ul>


        </section>
        <section class="aside-section tag">
          
    <h1>Tags</h1>

    <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/">LeetCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jQuery/">jQuery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javaScript/">javaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高质量代码/">高质量代码</a></li></ul>

        </section>
      </aside>
    </div>
  </body>
</html>
